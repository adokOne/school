#content-container
  #page-title
    %a.btn.btn-success.pull-right{href:baners_pages_path,"ng-click"=>"$root.setRoute('#{baners_pages_path}')"}=t("b1_admin.back_to_list")
    %h1.page-header.text-overflow
      Блог
  #page-content{:"ng-controller"=>"FaqCatController","ng-init"=>"editedItem=#{@item.serializable_hash.to_json}; categories=#{[{ title: t("b1_admin.is_parent"), id: 0}].concat(@categories).to_json}",:"data-url"=>baners_categories_path,"data-back-url"=>baners_pages_path}
    .row
      .col
        .panel
          .panel-heading
            .panel-control
              = render "shared/lang_selector"
            %h3.panel-title=t("b1_admin.faq_cat_manage")
          = form_tag baners_categories_path ,class: "form-horizontal",novalidate: true,name: :itemForm do
            .panel-body
              - I18n.available_locales.each do |l|
                .form-group{"ng-class" => "{'has-error': itemForm.title_#{l}.$invalid && itemForm.$submitted}",class: "lang lang_#{l}" ,style: "#{(B1Config.get_const.default_lang == l ? '' : 'display:none')}" }
                  = label_tag :"title_#{l}", t("b1_admin.title"), class:"col-sm-1 control-label"
                  .col-sm-7
                    = text_field_tag :"title_#{l}","" ,class:"form-control", "ng-minlength"=>3, "ng-model"=>"editedItem.title_#{l}"

                .form-group{"ng-class" => "{'has-error': itemForm.desc_#{l}.$invalid && itemForm.$submitted}",class: "lang lang_#{l}" ,style: "#{(B1Config.get_const.default_lang == l ? '' : 'display:none')}" }
                  = label_tag :"desc_#{l}", t("b1_admin.desc"), class:"col-sm-1 control-label"
                  .col-sm-7
                    = text_area_tag :"desc_#{l}","" ,class:"form-control",required: true, "ng-model"=>"editedItem.desc_#{l}"



              .form-group{"ng-class" => "{'has-error': itemForm.parent_id.$invalid && itemForm.$submitted}"}
                = label_tag :parent_id, t("b1_admin.parent_cat"), class:"col-sm-1 control-label"
                .col-sm-7
                  %select.form-control{"ng-model" => "editedItem.parent_id", "ng-options" => "continent.id as continent.title for continent in categories",required: true}

              .form-group
                = label_tag :logo_file_name, t("b1_admin.logo_file_name"), class:"col-sm-1 control-label"
                .col-md-10
                  .ng-scope{:"flow-name"=>"logo", :"flow-file-added" => "!!{png:1,gif:1,jpg:1,jpeg:1}[$file.getExtension()]", :"flow-init" => "{singleFile:true,target:'#{namespace}/blog/categories/'+editedItem.id + '/upload',testChunks:false}" ,:"flow-files-submitted"=>"$flow.upload()",:"ng-show" => "editedItem.id"}
                    .thumbnail{"ng-show" => "!$flow.files.length"}
                      %img{:"ng-src" => "{{editedItem.logo_file_name && editedItem.logo || 'http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=no+image'}}"}/
                    .thumbnail.ng-hide{:"ng-show" => "$flow.files.length"}
                      %img{"flow-img" => "$flow.files[0]"}/
                    %div
                      %span.btn.btn-primary{:"flow-btn" => "", :"ng-show" => "!$flow.files.length"}
                        Выбрать
                        %input{:style => "visibility: hidden; position: absolute;", :type => "file"}/
                      %span.btn.btn-info.ng-hide{:"flow-btn" => "", :"ng-show" => "$flow.files.length"}
                        Изменить
                        %input{:style => "visibility: hidden; position: absolute;", :type => "file"}/
                      %span.btn.btn-danger.ng-hide{:"ng-click" => "$flow.cancel()", :"ng-show" => "$flow.files.length"}
                        Удалить

              .mar-top.clearfix
                %a.btn.btn-sm.btn-primary.pull-right{"ng-click" => "save()"}
                  %i.fa.fa-pencil.fa-fw
                  =t("b1_admin.save")
