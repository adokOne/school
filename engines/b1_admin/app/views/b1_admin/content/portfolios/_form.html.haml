#content-container
  #page-title
    %a.btn.btn-success.pull-right{href:content_portfolios_path,"ng-click"=>"$root.setRoute('#{content_portfolios_path}')"}=t("b1_admin.back_to_list")
    %h1.page-header.text-overflow
      Портфолио
  #page-content{:"ng-controller"=>"CrudController","ng-init"=>"editedItem=#{@item.serializable_hash.to_json};",:"data-url"=>content_portfolios_path,"data-back-url"=>content_portfolios_path}
    .row
      .col
        .panel
          .panel-heading
            %h3.panel-title Управление работой
          = form_tag content_portfolios_path ,class: "form-horizontal",novalidate: true,name: :itemForm do
            .panel-body
              .row
                .col-md-8
                  .form-group{"ng-class" => "{'has-error': itemForm.title.$invalid && itemForm.$submitted}"}
                    = label_tag :title, t("b1_admin.title"), class:"col-sm-3 control-label"
                    .col-sm-8
                      = text_field_tag :title,"" ,class:"form-control",required: true,"ng-minlength"=>3,"ng-maxlength"=>255, "ng-model"=>"editedItem.title"

                  .form-group{"ng-class" => "{'has-error': itemForm.category.$invalid && itemForm.$submitted}"}
                    = label_tag :category, "Тип работ", class:"col-sm-3 control-label"
                    .col-sm-8
                      = text_field_tag :category,"" ,class:"form-control",required: true,"ng-minlength"=>3,"ng-maxlength"=>255, "ng-model"=>"editedItem.category"


                  .form-group{"ng-class" => "{'has-error': itemForm.anons.$invalid && itemForm.$submitted}"}
                    = label_tag :anons, t("b1_admin.anons"), class:"col-sm-3 control-label"
                    .col-sm-8
                      = text_field_tag :anons,"" ,class:"form-control",required: true,"ng-minlength"=>3,"ng-maxlength"=>255, "ng-model"=>"editedItem.anons"


                  .form-group{"ng-class" => "{'has-error': itemForm.site.$invalid && itemForm.$submitted}"}
                    = label_tag :site, "Ссылка", class:"col-sm-3 control-label"
                    .col-sm-8
                      = text_field_tag :site,"" ,class:"form-control","ng-maxlength"=>255, "ng-model"=>"editedItem.site"



                  .form-group{"ng-class" => "{'has-error': itemForm.main_type.$invalid && itemForm.$submitted}"}
                    = label_tag :main_type, "Основной тип", class:"col-sm-3 control-label"
                    .col-sm-8
                      = text_field_tag :main_type,"" ,class:"form-control",required: true,"ng-minlength"=>3,"ng-maxlength"=>255, "ng-model"=>"editedItem.main_type"

                  .form-group{"ng-class" => "{'has-error': itemForm.name.$invalid && itemForm.$submitted}"}
                    = label_tag :desc, t("b1_admin.desc"), class:"col-sm-3 control-label"
                    .col-sm-8
                      = text_area_tag :desc,"" ,class:"form-control",required: true,"ng-minlength"=>3, "ng-model"=>"editedItem.desc"
                  .form-group{"ng-class" => "{'has-error': itemForm.active.$invalid && itemForm.$submitted}"}
                    = label_tag :active, t("b1_admin.active"), class:"col-sm-3 control-label"
                    .col-sm-7
                      %input.js-switch{"ui-switch" => "true", type: "checkbox",id:"active", "ng-model"=>"editedItem.active"}





              .mar-top.clearfix
                %a.btn.btn-sm.btn-primary.pull-right{"ng-click" => "save()"}
                  %i.fa.fa-pencil.fa-fw
                  =t("b1_admin.save")
    - if params[:action] =~ /edit/
      .panel{:"ng-controller"=>"WithImagesCtrl", 'ng-init' => "item_id = editedItem.id; getImages();", "data-image-upload"=>upload_content_portfolio_path,"data-image-url"=>images_content_portfolio_path, :"data-delete-text"=>t("b1_admin.delete_media_confirm")}
        .panel-body
          .col-md-12
            .form-group{"ng-class" => "{'has-error': itemForm.active.$invalid && itemForm.$submitted}"}
              = label_tag :image, "Фото", class:"col-sm-3 control-label"
              .col-md-9
                .row
                  .col-md-4.well.my-drop-zone{'nv-file-drop' => '', 'nv-file-over' => '', 'uploader' => 'hotel_image_uploader', 'ng-click' => 'click_image_upload();'}
                    %input.hide{type: 'file', id:'hidden-file-input', 'nv-file-select' => '', 'uploader' => 'hotel_image_uploader'}
                    Зереместите сюда фотографии вашей работы
                .row.well.well-sm
                  .col-md-3.col-xs-3{'ng-repeat' => 'image in images track by $index'}
                    .thumbnail
                      %img{'ng-src' => '{{image.image_url}}',
                           'ng-click' => 'image_click($index, image)',
                           'style' => 'cursor:pointer;height:230px;width:340px'}
                      .caption
                        %p
                          %a.btn.btn-danger{'ng-click' => 'delete($event, image)'}
                            %span.fa.fa-trash-o
